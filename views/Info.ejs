<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/infoStyle.css">
</head>
<body>
    <div id="main">
        <div style="height: 30%;display: flex; justify-content: center;">
            <img src="/<%=details.Img%>" alt="Image">
        </div>
        <div id="InfoData">
            <h1 class="text-m">
                Account : <%= details.Acc %>
            </h1>
            <h1 class="text-m">
                Name : <%= details.Name %>
            </h1>
            <h1 class="text-m">
                Email : <%= details.Email %>
            </h1>
            <h1 class="text-m">
                Phone Number : <%= details.PhoneNumber%>
            </h1>
        </div>
        <div id="buttons">
            <h3> Balance : <%= details.Balance %></h3>
            <a href=<%=`/bank/${details.PhoneNumber}/credit`%>>
                <button type="button" class="btn btn-primary">Credit</button>
            </a>

            <% let check = "hello" %>
                
            <a  id="link" href="" onclick="get(event);">
                <button type="submit" class="btn btn-primary">Debit</button>
            </a>
        

            <form action=<%=`/bank/${details.PhoneNumber}/delete?_method=DELETE`%> method="post" style="display: inline;">
                <button type="submit" class="btn btn-primary">Delete Account</button>
            </form>
                    
        </div>
    </div>
    <script>
        let link = document.getElementById("link");
        console.dir(link);
        
        let num = "<%= details.PhoneNumber %>";
        let newNum = Number(num);
        let path = `/bank/${newNum}/debit`;
    
        let bal = "<%= details.Balance %>";
        let newbal = Number(bal); // Convert `bal` to a number, not `num`
    
        function get(event) {
            event.preventDefault();
    
            if (newbal > 0) {
                console.log("hello");
                // link.setAttribute("href", path);
                window.location.href = path; // Redirects to the new path
            } else {
                link.setAttribute("href", "");
                alert("Can not Debit Money with 0 Balance !!");
            }
        }
    </script>
</body>
</html>

